#!/usr/bin/env python3
from shutil import copyfile
from os.path import expanduser
import re


home = expanduser('~')
mailfile = home + '/.config/mail/new'
junkfile = home + '/.config/mail/junk'
copyfile('/var/mail/jonathan', mailfile)
froms = []
e = re.compile('^From:')
with open(mailfile) as mail:
    for line in mail.readlines():
        if e.match(line):
            froms.append(line.strip())

junk_list = []
with open(junkfile) as junk:
    for line in junk.readlines():
        junk_list.append(line.strip())

junk_re = '|'.join(junk_list)
r = re.compile(junk_re)
for sender in froms:
    if r.findall(sender):
        del froms[froms.index(sender)]


if len(froms) > 0:
    print(len(froms))
