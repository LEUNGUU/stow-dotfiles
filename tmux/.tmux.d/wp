#!/bin/sh

set -e

if tmux has-session -t $1 2> /dev/null; then
  $HOME/bin/switch_or_attach $1
  exit
fi

tmux new-session -c "$HOME/Sites/" -d -s $1 -n dev
tmux send-keys -t $1:dev "vim $HOME/Sites/$1/wp-content/themes" Enter

tmux new-window -t $1 -c "$HOME/Sites" -n shell
tmux send-keys -t $1:shell "server-up" Enter


tmux new-window -t $1 -c "$HOME/Sites" -n hangups
tmux send-keys -t $1:hangups "$HOME/Sites/hangups/bin/hangups" Enter

tmux new-window -t $1 -c "$HOME/Sites/" -n sass

tmux new-window -t $1 -c "$HOME/Sites" -n chrome
tmux send-keys -t $1:chrome "nohup google-chrome-beta --incognito http://tbs.local &" Enter
tmux send-keys -t $1:chrome "nohup google-chrome-beta --incognito http://tbs.local/wp-admin &" Enter
tmux send-keys -t $1:chrome "exit" Enter
$HOME/bin/switch_or_attach $1:shell.left
